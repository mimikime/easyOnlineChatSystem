
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>聊天室</title>
</head>
<body>
<h2>聊天室（群聊）</h2>
<div id="chat-box" style="height:300px; overflow-y:scroll; border:1px solid #ccc;"></div>
<br>
<input type="text" id="msg" placeholder="输入消息" style="width:80%;">
<button onclick="sendMessage()">发送</button>

<script>
    const username = prompt("请输入你的用户名");
    const socket = new WebSocket("ws://localhost:8080/ws/chat?username=" + username);

    socket.onmessage = function(event) {
        const box = document.getElementById("chat-box");
        box.innerHTML += "<div>" + event.data + "</div>";
        box.scrollTop = box.scrollHeight;
    };

    function sendMessage() {
        const msg = document.getElementById("msg").value;
        socket.send(username + ": " + msg);
        document.getElementById("msg").value = "";
    }
</script>
</body>
</html>
